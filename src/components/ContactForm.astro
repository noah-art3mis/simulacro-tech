---
import { Send } from 'lucide-astro';
---

<div class="w-full max-w-2xl mx-auto">
	<form id="contact-form" class="space-y-6">
		<div>
			<label for="name" class="block text-sm font-medium mb-2">Name</label>
			<input
				type="text"
				id="name"
				name="name"
				required
				class="w-full px-4 py-2 border border-black focus:outline-none focus:ring-2 focus:ring-black"
			/>
		</div>

		<div>
			<label for="email" class="block text-sm font-medium mb-2">Email</label>
			<input
				type="email"
				id="email"
				name="email"
				required
				class="w-full px-4 py-2 border border-black focus:outline-none focus:ring-2 focus:ring-black"
			/>
		</div>

		<div>
			<label for="message" class="block text-sm font-medium mb-2">Message</label>
			<textarea
				id="message"
				name="message"
				required
				rows="6"
				class="w-full px-4 py-2 border border-black focus:outline-none focus:ring-2 focus:ring-black resize-none"
			></textarea>
		</div>

		<div id="error" class="text-sm text-red-600 hidden"></div>

		<div id="success" class="bg-gray-100 border border-black p-6 text-center hidden">
			<p class="text-lg font-semibold mb-2">Thank you for your message!</p>
			<p class="text-sm text-gray-600">We'll get back to you soon.</p>
			<button
				type="button"
				id="send-another"
				class="mt-4 text-sm underline hover:no-underline"
			>
				Send another message
			</button>
		</div>

		<button
			type="submit"
			class="w-full bg-black text-white px-6 py-3 font-medium hover:bg-gray-800 transition-colors flex items-center justify-center gap-2"
		>
			Send Message
			<Send size={18} />
		</button>
	</form>
</div>

<script>
	const form = document.getElementById('contact-form') as HTMLFormElement;
	const errorDiv = document.getElementById('error');
	const successDiv = document.getElementById('success');
	const sendAnotherBtn = document.getElementById('send-another');

	if (form && errorDiv && successDiv && sendAnotherBtn) {
		form.addEventListener('submit', (e) => {
			e.preventDefault();
			errorDiv.classList.add('hidden');
			successDiv.classList.add('hidden');

			const formData = new FormData(form);
			const name = formData.get('name') as string;
			const email = formData.get('email') as string;
			const message = formData.get('message') as string;

			if (!name || !email || !message) {
				errorDiv.textContent = 'Please fill in all fields.';
				errorDiv.classList.remove('hidden');
				return;
			}

			if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
				errorDiv.textContent = 'Please enter a valid email address.';
				errorDiv.classList.remove('hidden');
				return;
			}

			// In a real application, you would send this to a backend
			console.log('Form submitted:', { name, email, message });
			form.classList.add('hidden');
			successDiv.classList.remove('hidden');
		});

		sendAnotherBtn.addEventListener('click', () => {
			form.reset();
			form.classList.remove('hidden');
			successDiv.classList.add('hidden');
			errorDiv.classList.add('hidden');
		});
	}
</script>

